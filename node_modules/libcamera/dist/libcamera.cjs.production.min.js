"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("child_process"),n=["help","version","list-cameras","fullscreen","qt-preview","nopreview","rawfull","hflip","vflip","flush"],r=["lens-position","camera","config","timeout","preview","info-text","width","height","viewfinder-width","viewfinder-height","mode","viewfinder-mode","lores-width","lores-height","rotation","roi","sharpness","contrast","brightness","saturation","ev","shutter","gain","analoggain","metering","exposure","awb","awbgains","denoise","tuning-file","output","wrap"],t={Flags:[].concat(n),Options:[].concat(r)},o={Flags:[].concat(n,["datetime","timestamp","keypress","signal","raw"]),Options:[].concat(r,["quality","exif","timelapse","framestart","restart","thumb","encoding","latest"])},i={Flags:[].concat(n,["keypress","signal","split","inline","listen"]),Options:[].concat(r,["quality","bitrate","intra","profile","level","codec","initial","segment","circular","frames"])},a={Flags:[].concat(n),Options:[].concat(r,["segment"])};function s(e){var n=e.exec;return Object.freeze({runCommand:function(e){var r=e.cmdCommand,t=e.options;try{return new Promise((function(e,o){n(r,t,(function(n,r,t){n&&(t&&o(t.trim()),o(n)),r&&e(r.trim()),t&&e(t.trim())}))}))}catch(e){throw console.log("Run command error = ",e),new Error("Error in execute run command")}},cmdCommand:function(e){var n=e.base,r=e.params;if(!r&&n)return n;if(!Array.isArray(r))throw new Error("params must be an Array");return n+" "+r.join(" ")}})}function c(e){var n=e.execute,r=e.jpegCommands,t=e.stillCommands,o=e.vidCommands,i=e.rawCommands;return function(){return Object.freeze({jpeg:function(e){var t=e.config;return t=l({config:t}),function(e){var n=e.execute;return u({execute:n,cmdCommand:m({baseType:"libcamera-jpeg",Flags:e.Flags,Options:e.Options,execute:n,config:e.config})})}({Flags:r.Flags,Options:r.Options,execute:n,config:t})},still:function(e){var r=e.config;return r=l({config:r}),function(e){var n=e.Flags,r=e.Options,t=e.execute,o=e.config;try{return u({execute:t,cmdCommand:m({baseType:"libcamera-still",Flags:n,Options:r,execute:t,config:o})})}catch(e){throw e instanceof Error?new Error("Things exploded ("+e.message+")"):new Error("Unknown error")}}({Flags:t.Flags,Options:t.Options,execute:n,config:r})},vid:function(e){var r=e.config;return r=l({config:r}),function(e){var n=e.Flags,r=e.Options,t=e.execute,o=e.config;try{return u({execute:t,cmdCommand:m({baseType:"libcamera-vid",Flags:n,Options:r,execute:t,config:o})})}catch(e){throw e instanceof Error?new Error("Things exploded ("+e.message+")"):new Error("Unknown error in tale Picture")}}({Flags:o.Flags,Options:o.Options,execute:n,config:r})},raw:function(e){var r=e.config;return r=l({config:r}),function(e){var n=e.Flags,r=e.Options,t=e.execute,o=e.config;try{return u({execute:t,cmdCommand:m({baseType:"libcamera-raw",Flags:n,Options:r,execute:t,config:o})})}catch(e){throw e instanceof Error?new Error("Things exploded ("+e.message+")"):new Error("Unknown error in tale Picture")}}({Flags:i.Flags,Options:i.Options,execute:n,config:r})}})}}function u(e){var n=e.execute,r=e.cmdCommand;try{return n.runCommand({cmdCommand:r}).catch((function(e){throw e instanceof Error?new Error("Things exploded ("+e.message+")"):"string"==typeof e?new Error(e):new Error("Unknown error in run command")}))}catch(e){throw e instanceof Error?new Error("Things exploded ("+e.message+")"):new Error("Unknown error")}}function m(e){return e.execute.cmdCommand({base:e.baseType,params:(n=e.config,r={Flags:e.Flags,Options:e.Options},t=r.Flags,o=r.Options,i=[],Object.keys(n).forEach((function(e){t.includes(e)&&n[e]?i.push("--"+e):o.includes(e)&&i.push("--"+e,n[e])})),i)});var n,r,t,o,i}function l(e){return e.config||{}}var g=c({execute:s({exec:e.exec}),jpegCommands:t,stillCommands:o,vidCommands:i,rawCommands:a})();exports.default=g,exports.libcamera=g;
//# sourceMappingURL=libcamera.cjs.production.min.js.map
